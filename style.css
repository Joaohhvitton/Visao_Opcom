/* =========================
   VARIÁVEIS DE TEMA
========================= */

:root{
  --bg:#f4f6f8;
  --text:#1e293b;

  /* cards no tema claro */
  --card-bg1:#530F0A;
  --card-bg2:#2a0705;

  --primary:#530F0A;
  --accent:#ff6b57;
  --border:#e5e7eb;
  --kpi-bg:#530F0A;
  --kpi-bg-2:#2a0705;
  --kpi-text:#ffffff;
  --surface-pattern-dot:rgba(255,255,255,.06);
  --ticker-text:#7a1410;
}

.dark{
  --bg:#140504;
  --text:#f1f5f9;

  /* cards no tema escuro */
  --card-bg1:#ffffff;
  --card-bg2:#f2f2f2;

  --border:#3a1a18;
  --kpi-bg:#ffffff;
  --kpi-bg-2:#f2f2f2;
  --kpi-text:#1e293b;
  --surface-pattern-dot:rgba(0,0,0,.06);
  --ticker-text:#ffffff;
}

/* =========================
   BASE
========================= */

body{
  margin:0;
  padding:24px;
  padding-bottom:84px;
  font-family:Segoe UI, Arial;
  background:var(--bg);
  color:var(--text);
  transition:.3s;
}

/* =========================
   HEADER
========================= */

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:22px;
}

.header-right{
  display:flex;
  gap:10px;
  align-items:center;
}

/* =========================
   BOTÕES
========================= */

.btn,
.btnLogout{
  background:var(--primary);
  color:white;
  border:none;
  padding:10px 14px;
  border-radius:12px;
  cursor:pointer;
}

.themeToggle{
  background:transparent;
  border:1px solid var(--border);
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
}

/* =========================
   KPI
========================= */

.kpiGrid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:16px;
  margin-bottom:16px;
}

.collaboratorGrid{
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
}

.kpiCard{
  background:linear-gradient(145deg,var(--kpi-bg),var(--kpi-bg-2));
  color:var(--kpi-text);
  padding:18px;
  border-radius:18px;
  box-shadow:0 8px 22px rgba(0,0,0,.15);
  border:1px solid rgba(255,255,255,.12);
  min-height:88px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:6px;
}

.kpiValue{
  font-size:28px;
  font-weight:800;
}

/* =========================
   FILTRO
========================= */

.filterBlock{
  background:linear-gradient(145deg,var(--kpi-bg),var(--kpi-bg-2));
  color:var(--kpi-text);
  padding:14px;
  border-radius:16px;
  margin-bottom:16px;
  border:1px solid rgba(255,255,255,.12);
}

.modernFilter{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding:14px 16px;
  box-shadow:0 10px 28px rgba(0,0,0,.16), inset 0 1px 0 rgba(255,255,255,.08);
  overflow:hidden;
}

.modernFilter::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:inherit;
  border:1px solid rgba(255,255,255,.18);
  pointer-events:none;
  animation:filterGlow 3s ease-in-out infinite;
}

.filterLabel{
  font-weight:700;
  letter-spacing:.2px;
}

.filterSelectWrap{
  position:relative;
  min-width:220px;
}

.filterSelectWrap::after{
  content:"▾";
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  color:var(--kpi-text);
  pointer-events:none;
  opacity:.9;
  font-size:14px;
}

#squadFilter{
  width:100%;
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.28);
  background:rgba(255,255,255,.12);
  color:var(--kpi-text);
  font-weight:600;
  padding:10px 36px 10px 12px;
  transition:.25s;
}

#squadFilter:hover{
  background:rgba(255,255,255,.18);
}

#squadFilter:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(255,107,87,.25);
}

#squadFilter option{
  color:#1e293b;
}

@keyframes filterGlow{
  0%,100%{opacity:.25; transform:scale(1);}
  50%{opacity:.6; transform:scale(1.004);}
}

@media (max-width: 720px){
  .modernFilter{
    flex-direction:column;
    align-items:flex-start;
  }

  .filterSelectWrap{
    width:100%;
    min-width:0;
  }
}

/* =========================
   GRID
========================= */

.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:18px;
}

/* =========================
   CARD (GRÁFICOS)
========================= */

.card{
  position:relative;
  overflow:hidden;
  border-radius:22px;
  padding:16px;
  color:var(--kpi-text);

  background:
    linear-gradient(var(--card-bg1), var(--card-bg2)),
    repeating-linear-gradient(
      90deg,
      var(--surface-pattern-dot) 0px,
      var(--surface-pattern-dot) 1px,
      transparent 1px,
      transparent 22px
    );

  box-shadow:
    0 16px 40px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.06);

  transition:.3s;
}


/* hover suave */
.card:hover{
  transform:translateY(-4px);
}

/* =========================
   GLOW / FX
========================= */

.card::before,
.card::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
}

.card::before{
  background:
    radial-gradient(rgba(255,120,90,.22) 1px, transparent 1px);
  background-size:26px 26px;
  opacity:.35;
  animation:particles 20s linear infinite;
}

@keyframes particles{
  from{background-position:0 0}
  to{background-position:120px 80px}
}

/* =========================
   TITULOS
========================= */

.card h3{
  margin:0 0 8px;
  font-weight:800;
  letter-spacing:.3px;
}

/* =========================
   CANVAS
========================= */

canvas{
  height:260px !important;
}

/* =========================
   ANIMAÇÃO FILTRO
========================= */

.updating{
  opacity:.45;
  transform:scale(.97);
  filter:blur(1px);
}

/* =========================
   LOGIN
========================= */

.loginScreen{
  position:fixed;
  inset:0;
  background:#1a0504;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.loginTitle{
  color:#ffffff;
  text-align:center;
  font-size:28px;
  font-weight:800;
  letter-spacing:1px;
  margin:0;
}

.loginSubtitle{
  text-align:center;
  color:rgba(255,255,255,.7);
  font-size:13px;
  margin-bottom:14px;
}

.loginBgAnim{
  position:absolute;
  width:140%;
  height:140%;
  background:
    radial-gradient(circle at 20% 30%, #7a1410, transparent 40%),
    radial-gradient(circle at 80% 70%, #530F0A, transparent 45%),
    radial-gradient(circle at 50% 50%, #2a0705, transparent 60%);
  filter:blur(30px);
}

.loginBox{
  position:relative;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(18px);
  border-radius:20px;
  padding:34px;
  width:320px;
  display:flex;
  flex-direction:column;
  gap:14px;
  box-shadow:0 20px 60px rgba(0,0,0,.45);
}

.loginBox input{
  padding:12px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.1);
  color:white;
}

#loginBtn{
  background:linear-gradient(135deg,#530F0A,#7a1410);
  border:none;
  padding:12px;
  border-radius:12px;
  font-weight:700;
  color:white;
  cursor:pointer;
}

#loginError{
  color:#ffb4aa;
  font-size:13px;
  text-align:center;
}

/* =========================
   PULSO VERMELHO LEVE
========================= */

.pulseRed{
  animation:pulseRed 3.5s ease-in-out infinite;
  box-shadow:
    0 0 0 rgba(255,0,0,0);
}

@keyframes pulseRed{
  0%{
    box-shadow:
      0 0 0 0 rgba(180,30,20,.0),
      0 0 18px rgba(180,30,20,.25);
  }

  50%{
    box-shadow:
      0 0 0 8px rgba(180,30,20,.08),
      0 0 26px rgba(180,30,20,.45);
  }

  100%{
    box-shadow:
      0 0 0 0 rgba(180,30,20,.0),
      0 0 18px rgba(180,30,20,.25);
  }
}

.loginBgAnim{
  pointer-events:none;
}


/* =========================
   POPUP BOAS-VINDAS
========================= */

.welcomePopup{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(10,7,20,.45);
  backdrop-filter:blur(4px);
  z-index:998;
}

.welcomePopup.hidden{
  display:none;
}

.welcomeCard{
  width:min(460px,90vw);
  background:linear-gradient(145deg,#530F0A,#2a0705);
  color:#fff;
  border-radius:18px;
  padding:24px;
  box-shadow:0 24px 55px rgba(0,0,0,.45);
  animation:welcomePop .45s ease;
}

.welcomeCard h3{
  margin:0 0 10px;
}

.welcomeCard p{
  margin:0 0 18px;
  color:rgba(255,255,255,.88);
}

.welcomeCard .btn{
  width:100%;
  font-weight:700;
}


.collaboratorPopupCard{
  width:min(980px,94vw);
  background:linear-gradient(145deg,var(--kpi-bg),var(--kpi-bg-2));
  color:var(--kpi-text);
}

.collaboratorPopupCard .collaboratorGrid{
  margin:8px 0 16px;
}

.collaboratorPopupCard .btn{
  width:100%;
}

@keyframes welcomePop{
  0%{transform:scale(.88) translateY(8px); opacity:0;}
  100%{transform:scale(1) translateY(0); opacity:1;}
}


.logoutCard .logoutActions{
  display:flex;
  gap:10px;
}

.logoutCard .btn{
  flex:1;
}

.btnGhost{
  background:transparent;
  border:1px solid rgba(255,255,255,.45);
}

.btnGhost:hover{
  background:rgba(255,255,255,.12);
}


/* =========================
   RODAPÉ INFORMATIVO
========================= */

.collaboratorTicker{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  z-index:997;
  overflow:hidden;
  backdrop-filter:blur(4px);
  background:rgba(255,255,255,.68);
  border-top:1px solid rgba(122,20,16,.2);
  padding:8px 0;
}

.dark .collaboratorTicker{
  background:rgba(15,10,25,.65);
  border-top:1px solid rgba(255,255,255,.18);
}

.collaboratorTickerTrack{
  white-space:nowrap;
  display:inline-block;
  padding-left:100%;
  color:var(--ticker-text);
  font-weight:800;
  letter-spacing:.2px;
  animation:tickerMove 24s linear infinite;
}

@keyframes tickerMove{
  from{transform:translateX(0);}
  to{transform:translateX(-100%);}
}


.collaboratorTicker.is-hidden{
  display:none;
}

#tickerToggleBtn.is-off{
  opacity:.78;
  filter:saturate(.6);
}
